
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="">
      <meta name="author" content="">
      <title>20/20 Opioid</title>

      <!-- Bootstrap core CSS     -->
      <link href="static/css/bootstrap.min.css" rel="stylesheet" />

      <!-- Animation library for notifications   -->
      <link href="static/css/animate.min.css" rel="stylesheet"/>
      <!--  Paper Dashboard core CSS    -->

      <link href="static/css/paper-dashboard.css" rel="stylesheet"/>
      <!--  Fonts and icons     -->
      <link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
      <link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
      <link href="static/css/themify-icons.css" rel="stylesheet">
      <style>
	
	
      </style>
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
      <script type="text/javascript">
      
      
      </script>
      
      <script src='https://api.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.js'></script>
      <link href='https://api.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.css' rel='stylesheet' />


   </head>
   <body>
      <div class="wrapper">
	<div class="sidebar" data-background-color="black" data-active-color="primary">
          <div id="sidebar-wrapper">
            <div class="sidebar-wrapper">
               <div class="logo">
                  <a href="/" class="simple-text">
                    20/20 Opioid
                  </a>
               </div>
               <ul class="nav">
                  <li class="active">
                     <a href="/">
                        <p>Map</p>
                     </a>
                  </li>
                  <li>
                     <a href="/ethnicity">
                        <p>Ethnicity</p>
                     </a>
                  </li>
                  <li>
                     <a href="/age">
                        <p>Age Group</p>
                     </a>
                  </li>
                  <li>
                     <a  href="/gender">
                        <p>Gender</p>
                     </a>
                  </li>
                  <li>
                     <a href="/populationdensity">
                        <p>Population Density</p>
                     </a>
                  </li>
                  <li>
                     <a href="/analysis">
                        <p>Analysis</p>
                     </a>
                  </li>
               </ul>
            </div>
         </div>
      </div>
      <div class="main-panel">
         <nav class="navbar navbar-default">
            <div class="container-fluid">
               <div class="navbar-header">
                  <a class="navbar-brand">Map</a>
               </div>
            </div>
         </nav>
         <!-- Page Content -->
         <div class="content">
            <div class="container-fluid">
               <div class="row">
                  <div class="col-md-12">
                     <div class="card">
                        <div class="header">
                           <p>Tracking the Opioid Crisis</p
							      </div>
			
      

   <div>
      <div id='map'></div>
      <div class='map-overlay' id='features'>
        <h2>Deaths From Opioid Overdose in 2014</h2>
        <div id='pd'>
          <p>Hover over a state.</p>
        </div>
      </div>
      <div class='map-overlay' id='legend'></div>
      <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoicmF5NzI1IiwiYSI6ImNqOTNtMGdpOTN3ZG4yd21iaHF1NGpncHQifQ.Wt1TCgYrOhIsL12o4BrozQ';
        var map = new mapboxgl.Map({
          container: 'map', // container id
          style: 'mapbox://styles/ray725/cj94zg6wn0ghu2rl5bwnlin5e' // replace this with your style URL
        });
        map.on('load', function() {
          var layers = ['5-10', '10-15', '15-20', '20-30', '30-40', '40-50', '50+'];
          var colors = ['#FFEDA0', '#FED976', '#FEB24C', '#FD8D3C', '#FC4E2A', '#E31A1C', '#BD0026'];
          for (i = 0; i < layers.length; i++) {
            var layer = layers[i];
            var color = colors[i];
            var item = document.createElement('div');
            var key = document.createElement('span');
            key.className = 'legend-key';
            key.style.backgroundColor = color;
            var value = document.createElement('span');
            value.innerHTML = layer;
            item.appendChild(key);
            item.appendChild(value);
            legend.appendChild(item);
            if (i === layers.length - 1) {
              item.id = "legendDescriptor"
              item.innerHTML = "Deaths/100,000";
              legend.appendChild(item);
            }
          }
          map.addLayer({
            "id": "state-borders",
            "type": "line",
            "source": "us-states-doi7hq",
            "layout": {},
            "paint": {
              "line-color": "#627BC1",
              "line-width": 5
            }
          });
        });
        // When a click event occurs on a feature in the states layer, open a popup at the
        // location of the click, with description HTML from its properties.
        map.on('click', 'state-borders', function(e) {
          new mapboxgl.Popup()
            .setLngLat(e.features[0].geometry.coordinates[0])
            .setHTML(e.features[0].properties.name)
            .addTo(map);
        });
        map.on('mousemove', function(e) {
          var states = map.queryRenderedFeatures(e.point, {
            layers: ['us-states-doi7hq']
          });
          if (states.length > 0) {
            document.getElementById('pd').innerHTML = '<h3><strong>' + states[0].properties.deaths + " deaths" + '</strong></h3><p><strong><em></strong></em></p>';
          } else {
            document.getElementById('pd').innerHTML = '<p>Hover over a state!</p>';
          }
        });
        map.getCanvas().style.cursor = 'default';
        map.fitBounds([
          [-133.2421875, 16.972741],
          [-47.63671875, 52.696361]
        ]);



	       </div>
                  </div>
            </div>
         </div>
      </div>
</div>
      

   </body>
   <!--   Core JS Files   -->
   <script src="static/js/jquery-1.10.2.js" type="text/javascript"></script>
   <script src="static/js/bootstrap.min.js" type="text/javascript"></script>
   <!--  Checkbox, Radio & Switch Plugins -->
   <script src="static/js/bootstrap-checkbox-radio.js"></script>
   <!--  Charts Plugin -->
   <script src="static/js/chartist.min.js"></script>
   <!--  Notifications Plugin    -->
   <script src="static/js/bootstrap-notify.js"></script>
   <!--  Google Maps Plugin    -->
   <script type="static/text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>
   <!-- Paper Dashboard Core javascript and methods for Demo purpose -->
   <script src="static/js/paper-dashboard.js"></script>

</html>
